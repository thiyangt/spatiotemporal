{
  "hash": "b216c0bc415b46098836b9bc6953a4f5",
  "result": {
    "markdown": "---\ntitle: 'Data Visualization: Grammar of Graphics'\nformat:\n  revealjs:\n    incremental: true\n---\n\n## Grammar\n\n::: {layout-ncol=2}\n\n### English\n\n- Nouns\n- Article\n- Adjective\n- Verb\n- Adverb\n- Proposition\n\n### Graphics\n\n<img src=\"ggplotaes/scales.PNG\" alt=\"knitrhex\" height=\"500\"/>\n\n:::\n\n\n\n## Grammar - Example\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n**English**\n\nThe little monkey hangs confidently by a branch.\n\n\n\n\n:::\n\n\n::: {.column width=\"50%\"}\n\n**Graphics**\n\n::: {.cell execution_count=1}\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-2-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=256}\n```\n<ggplot: (-9223372036467841564)>\n```\n:::\n:::\n\n\n:::\n\n::::\n\n\n\n## Grammar - Example\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n**English**\n\n Article: The\n\n Adjective: little\n\n Noun: monkey\n\n Verb: hangs\n\n Adverb: Confidently\n\n Proposition: by\n\n Noun: a branch\n\n\n:::\n\n\n::: {.column width=\"50%\"}\n\n**Graphics**\n\n<img src=\"ggplotaes/d1.PNG\" alt=\"knitrhex\" height=\"500\"/>\n\n:::\n\n::::\n\n\n\n\n\n\n\n\n## Graphics - Grammar components \n\n::: {.panel-tabset}\n\n### Plot\n\n::: {.cell fig-height='8' fig-width='12' results='asis' execution_count=2}\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-3-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=257}\n```\n<ggplot: (388856107)>\n```\n:::\n:::\n\n\n### Code\n\n\n```python\n\nimport pandas as pd\nimport numpy as np\n\nfrom plotnine import *\nfrom plotnine.data import *\n\n%matplotlib inline\n(\n    ggplot(economics, aes(x='date', y='uempmed')) \n    + geom_line() \n)\n\n```\n\n:::\n\n\n\n## `geom_line`\n\n::: {.panel-tabset}\n\n### Plot\n\n::: {.cell execution_count=3}\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-4-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=258}\n```\n<ggplot: (387059976)>\n```\n:::\n:::\n\n\n### Code\n\n\n```python\n\nimport pandas as pd\nimport numpy as np\n\nfrom plotnine import *\nfrom plotnine.data import *\n\n%matplotlib inline\n(\n    ggplot(economics, aes(x='date', y='uempmed')) \n    + geom_line() \n)\n\n```\n\n:::\n\n## `geom_point`\n\n::: {.panel-tabset}\n\n### Plot\n\n::: {.cell execution_count=4}\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-5-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=259}\n```\n<ggplot: (387895244)>\n```\n:::\n:::\n\n\n### Code\n\n\n```python\n\nimport pandas as pd\nimport numpy as np\n\nfrom plotnine import *\nfrom plotnine.data import *\n\n%matplotlib inline\n(\n    ggplot(economics, aes(x='date', y='uempmed')) \n    + geom_point() # line plot\n    + labs(x='date', y='median duration of unemployment, in week')\n)\n\n```\n\n:::\n\n# Making your first plot with `plotnine`\n\n## Data\n\nDate: data to be plotted\n\n![](ggplotaes/data.PNG)\n\n## Packages\n\n::: {.cell execution_count=5}\n``` {.python .cell-code}\nimport pandas as pd\nimport plotnine\n\nfrom plotnine import *\nfrom plotnine.data import *\n```\n:::\n\n\n## Dataset: `economics`\n\n::: {.cell execution_count=6}\n``` {.python .cell-code}\neconomics.head(3)\n```\n\n::: {.cell-output .cell-output-display execution_count=261}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>date</th>\n      <th>pce</th>\n      <th>pop</th>\n      <th>psavert</th>\n      <th>uempmed</th>\n      <th>unemploy</th>\n      <th>year</th>\n      <th>month</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1967-07-01</td>\n      <td>507.4</td>\n      <td>198712</td>\n      <td>12.5</td>\n      <td>4.5</td>\n      <td>2944</td>\n      <td>1967</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1967-08-01</td>\n      <td>510.5</td>\n      <td>198911</td>\n      <td>12.5</td>\n      <td>4.7</td>\n      <td>2945</td>\n      <td>1967</td>\n      <td>8</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1967-09-01</td>\n      <td>516.3</td>\n      <td>199113</td>\n      <td>11.7</td>\n      <td>4.6</td>\n      <td>2958</td>\n      <td>1967</td>\n      <td>9</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Dataset: `economics`\n\n::: {.cell execution_count=7}\n``` {.python .cell-code}\neconomics.info()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 574 entries, 0 to 573\nData columns (total 8 columns):\n #   Column    Non-Null Count  Dtype         \n---  ------    --------------  -----         \n 0   date      574 non-null    datetime64[ns]\n 1   pce       574 non-null    float64       \n 2   pop       574 non-null    int64         \n 3   psavert   574 non-null    float64       \n 4   uempmed   574 non-null    float64       \n 5   unemploy  574 non-null    int64         \n 6   year      574 non-null    int64         \n 7   month     574 non-null    int64         \ndtypes: datetime64[ns](1), float64(3), int64(4)\nmemory usage: 36.0 KB\n```\n:::\n:::\n\n\n## Dataset: `economics`\n\n::: {.cell execution_count=8}\n``` {.python .cell-code}\neconomics['year'] = economics['date'].dt.year\neconomics['month'] = economics['date'].dt.month\n```\n:::\n\n\n## Dataset: `economics`\n\n::: {.cell execution_count=9}\n``` {.python .cell-code}\neconomics.info()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 574 entries, 0 to 573\nData columns (total 8 columns):\n #   Column    Non-Null Count  Dtype         \n---  ------    --------------  -----         \n 0   date      574 non-null    datetime64[ns]\n 1   pce       574 non-null    float64       \n 2   pop       574 non-null    int64         \n 3   psavert   574 non-null    float64       \n 4   uempmed   574 non-null    float64       \n 5   unemploy  574 non-null    int64         \n 6   year      574 non-null    int64         \n 7   month     574 non-null    int64         \ndtypes: datetime64[ns](1), float64(3), int64(4)\nmemory usage: 36.0 KB\n```\n:::\n:::\n\n\n## Dataset: `economics`\n\n::: {.cell execution_count=10}\n``` {.python .cell-code}\neconomics.head(3)\n```\n\n::: {.cell-output .cell-output-display execution_count=265}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>date</th>\n      <th>pce</th>\n      <th>pop</th>\n      <th>psavert</th>\n      <th>uempmed</th>\n      <th>unemploy</th>\n      <th>year</th>\n      <th>month</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1967-07-01</td>\n      <td>507.4</td>\n      <td>198712</td>\n      <td>12.5</td>\n      <td>4.5</td>\n      <td>2944</td>\n      <td>1967</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1967-08-01</td>\n      <td>510.5</td>\n      <td>198911</td>\n      <td>12.5</td>\n      <td>4.7</td>\n      <td>2945</td>\n      <td>1967</td>\n      <td>8</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1967-09-01</td>\n      <td>516.3</td>\n      <td>199113</td>\n      <td>11.7</td>\n      <td>4.6</td>\n      <td>2958</td>\n      <td>1967</td>\n      <td>9</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Tidy data\n\n\n![](ggplotaes/tidy.png)\n\n- Every column is a variable.\n\n- Every row is an observation.\n\n- Every cell is a single value.\n\n## Tidy data - Example\n\n![](tidyr/tidyr1.png)\n\n## Tidy data - Example\n\n![](tidyr/tidyr2.png)\n\n## Tidy data - Example\n\n![](tidyr/tidyr3.png)\n\n\n## Tidy data - Example\n\n![](tidyr/longer_wider.png)\n\n## Data\n\n::: {.cell execution_count=11}\n``` {.python .cell-code}\nggplot(data=economics)\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-12-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=266}\n```\n<ggplot: (387041435)>\n```\n:::\n:::\n\n\n## Aesthetics: mapping variables\n\n![](ggplotaes/aes.PNG)\n\n## Aesthetics: mapping variables\n\nAesthetic means “something you can see”. \n\n- position (i.e., on the x and y axes) \n\n- color (“outside” color) \n\n- fill (“inside” color)\n\n- shape (of points)\n\n## Aesthetic: position\n\n::: {.cell execution_count=12}\n``` {.python .cell-code}\nfrom plotnine.data import mtcars\n\nggplot(mtcars, aes('wt', 'mpg')) + geom_point()\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-13-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=267}\n```\n<ggplot: (-9223372036466251730)>\n```\n:::\n:::\n\n\n## Aesthetic: color\n\n::: {.cell execution_count=13}\n``` {.python .cell-code}\nggplot(mtcars, aes('wt', 'mpg', color='factor(cyl)')) + geom_point()\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-14-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=268}\n```\n<ggplot: (-9223372036466882595)>\n```\n:::\n:::\n\n\n## Aesthetic: shape\n\n::: {.cell execution_count=14}\n``` {.python .cell-code}\nggplot(mtcars, aes('wt', 'mpg', shape='factor(cyl)')) + geom_point()\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-15-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=269}\n```\n<ggplot: (-9223372036467794109)>\n```\n:::\n:::\n\n\n## Aesthetic: size\n\n::: {.cell execution_count=15}\n``` {.python .cell-code}\nggplot(mtcars, aes('wt', 'mpg', size='factor(cyl)')) + geom_point()\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-16-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=270}\n```\n<ggplot: (389394913)>\n```\n:::\n:::\n\n\n## Data + Aesthetics\n\n::: {.cell execution_count=16}\n``` {.python .cell-code}\nggplot(economics, aes(x='date', y='uempmed'))\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-17-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=271}\n```\n<ggplot: (389393160)>\n```\n:::\n:::\n\n\n## Geometrics\n\nActual marks we put on a plot\n\n![](ggplotaes/geom.PNG)\n\n## Data + Aesthetics + Geometrics\n\n::: {.cell execution_count=17}\n``` {.python .cell-code}\nggplot(economics, aes(x='date', y='uempmed')) + geom_point()\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-18-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=272}\n```\n<ggplot: (-9223372036466981958)>\n```\n:::\n:::\n\n\n## Data + Aesthetics + Geometrics\n\n::: {.cell execution_count=18}\n``` {.python .cell-code}\nggplot(economics, aes(x='date', y='uempmed')) + geom_point(alpha=0.5)\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-19-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=273}\n```\n<ggplot: (387416177)>\n```\n:::\n:::\n\n\n## Data + Aesthetics + Geometrics\n\n::: {.cell execution_count=19}\n``` {.python .cell-code}\nggplot(economics, aes(x='date', y='uempmed')) + geom_point(size=0.3)\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-20-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=274}\n```\n<ggplot: (387793896)>\n```\n:::\n:::\n\n\n## Data + Aesthetics + Geometrics\n\n::: {.cell execution_count=20}\n``` {.python .cell-code}\nggplot(economics, aes(x='date', y='uempmed')) + geom_line()\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-21-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=275}\n```\n<ggplot: (-9223372036467376980)>\n```\n:::\n:::\n\n\n## Data + Aesthetics + Geometrics\n\n::: {.cell execution_count=21}\n``` {.python .cell-code}\nggplot(economics, aes(x='date', y='uempmed')) + geom_line() + geom_point(size=0.3)\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-22-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=276}\n```\n<ggplot: (-9223372036466972209)>\n```\n:::\n:::\n\n\n## Data + Aesthetics + Geometrics\n\n::: {.cell execution_count=22}\n``` {.python .cell-code}\nggplot(economics, aes(x='date', y='uempmed')) + geom_line() + geom_point(size=0.3, colour=\"blue\")\n```\n\n::: {.cell-output .cell-output-display}\n![](1_intro_files/figure-revealjs/cell-23-output-1.png){}\n:::\n\n::: {.cell-output .cell-output-display execution_count=277}\n```\n<ggplot: (389146365)>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "1_intro_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}